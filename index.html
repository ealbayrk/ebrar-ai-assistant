<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ebrar AI Assistant</title>

  <style>
    :root {
      --bg-grad-start: #0f172a;
      --bg-grad-end: #111827;
      --card-bg: rgba(15, 23, 42, 0.85);
      --accent: #f97316;
      --accent-soft: rgba(249, 115, 22, 0.15);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.4);
      --radius-lg: 18px;
      --radius-full: 999px;
      --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.55);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0, #020617 55%, #000 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      color: var(--text-main);
    }

    .shell { max-width: 960px; width: 100%; }

    .card {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(17, 24, 39, 0.94));
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 24px;
      display: grid;
      grid-template-columns: minmax(0, 3.5fr) minmax(260px, 2.2fr);
      gap: 24px;
      backdrop-filter: blur(20px);
    }

    @media (max-width: 800px) {
      .card { grid-template-columns: minmax(0, 1fr); }
    }

    /* SOL TARAF */
    .chat-section { display: flex; flex-direction: column; gap: 16px; }

    .badge {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 4px 12px; border-radius: var(--radius-full);
      background: rgba(148, 163, 184, 0.08);
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 11px; letter-spacing: 0.08em; text-transform: uppercase;
      color: var(--text-muted);
      width: 100%;
    }

    .badge-dot {
      width: 8px; height: 8px; border-radius: 50%;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
      flex: 0 0 auto;
    }

    .badge-text { flex: 1 1 auto; }

    .lang-toggle {
      margin-left: auto;
      border-radius: 999px;
      padding: 6px 10px;
      border: 1px solid rgba(148,163,184,0.55);
      background: rgba(15,23,42,0.85);
      color: var(--text-main);
      font-size: 11px;
      cursor: pointer;
      transition: .15s ease;
      white-space: nowrap;
      flex: 0 0 auto;
    }
    .lang-toggle:hover{
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(249,115,22,0.12);
      transform: translateY(-1px);
    }

    .title-row { display: flex; flex-direction: column; gap: 6px; }
    .title-row h1 { font-size: 24px; letter-spacing: 0.04em; }
    .title-row span { font-size: 13px; color: var(--text-muted); }

    .intro {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.6;
      margin-top: 8px;
    }

    .pill-row { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }

    .pill {
      font-size: 11px; padding: 5px 10px;
      border-radius: var(--radius-full);
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.45);
      color: var(--text-muted);
      display: inline-flex; align-items: center; gap: 6px;
    }

    .pill-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--accent); }

    .chatbox {
      margin-top: 14px;
      padding: 14px;
      border-radius: 16px;
      background: radial-gradient(circle at top left, rgba(248, 250, 252, 0.04), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(148, 163, 184, 0.35);
      height: 320px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      scroll-behavior: smooth;
    }

    .message {
      padding: 9px 12px;
      border-radius: 12px;
      font-size: 13px;
      line-height: 1.5;
      max-width: 82%;
      position: relative;
      word-break: break-word;
    }

    .bot {
      align-self: flex-start;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .bot::before {
      content: "EA";
      position: absolute;
      top: -16px;
      left: 0;
      font-size: 10px;
      letter-spacing: 0.14em;
      color: var(--accent);
      text-transform: uppercase;
    }

    .user {
      align-self: flex-end;
      background: rgba(249, 115, 22, 0.12);
      border: 1px solid rgba(249, 115, 22, 0.6);
    }

    .choice-wrap { margin-top: 10px; display: flex; flex-wrap: wrap; gap: 8px; }

    .choice-btn {
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      background: rgba(15, 23, 42, 0.85);
      color: var(--text-main);
      font-size: 12px;
      cursor: pointer;
      transition: 0.15s ease;
    }
    .choice-btn.secondary { border-style: dashed; color: var(--text-muted); }
    .choice-btn:hover {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(249,115,22,0.12);
      transform: translateY(-1px);
    }
    .choice-btn:disabled { opacity: .45; cursor: default; transform: none; box-shadow: none; }

    .input-area { margin-top: 12px; display: flex; align-items: center; gap: 8px; }
    .input-wrapper { position: relative; flex: 1; }

    .input-wrapper input {
      width: 100%;
      padding: 11px 80px 11px 11px;
      border-radius: var(--radius-full);
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text-main);
      font-size: 13px;
      outline: none;
    }
    .input-wrapper input::placeholder { color: #6b7280; }

    .shortcut-hint {
      position: absolute; right: 10px; top: 50%;
      transform: translateY(-50%);
      font-size: 10px; color: #6b7280;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.7);
      padding: 2px 6px;
    }

    .send-btn {
      border-radius: var(--radius-full);
      padding: 10px 14px;
      border: none;
      background: linear-gradient(135deg, #f97316, #fb923c);
      color: #0b1120;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 25px rgba(249, 115, 22, 0.4);
      white-space: nowrap;
      transition: .15s ease;
    }
    .send-btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .send-btn:active { transform: translateY(0); box-shadow: 0 6px 18px rgba(249, 115, 22, 0.35); }
    .send-btn span { font-size: 16px; transform: translateY(1px); }

    .bottom-menu{
      position: sticky;
      bottom: 0;
      padding-top: 10px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      background: linear-gradient(180deg, rgba(2,6,23,0) 0%, rgba(2,6,23,0.75) 35%, rgba(2,6,23,0.95) 100%);
      backdrop-filter: blur(10px);
      z-index: 5;
    }
    .bm-btn{
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px solid rgba(148,163,184,0.55);
      background: rgba(15,23,42,0.85);
      color: var(--text-main);
      font-size: 12px;
      cursor: pointer;
      transition: .15s ease;
    }
    .bm-btn:hover{
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(249,115,22,0.12);
      transform: translateY(-1px);
    }

    .quick-questions { margin-top: 10px; display: flex; flex-wrap: wrap; gap: 6px; }
    .quick-btn {
      font-size: 11px;
      padding: 5px 9px;
      border-radius: var(--radius-full);
      border: 1px dashed rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.8);
      color: var(--text-muted);
      cursor: pointer;
    }
    .quick-btn:hover { border-style: solid; color: var(--accent); }

    /* SAÄ TARAF */
    .side-section {
      border-left: 1px solid rgba(148, 163, 184, 0.38);
      padding-left: 20px;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    @media (max-width: 800px) {
      .side-section {
        border-left: none;
        border-top: 1px solid rgba(148, 163, 184, 0.38);
        padding-left: 0;
        padding-top: 18px;
        margin-top: 6px;
      }
    }

    .profile-row { display: flex; align-items: center; gap: 12px; }
    .avatar {
      width: 58px; height: 58px; border-radius: 50%;
      border: 2px solid rgba(249, 115, 22, 0.8);
      background-size: cover;
      background-position: center;
      background-image: url("https://raw.githubusercontent.com/ealbayrk/ebrar-ai-assistant/main/IMG_0358.PNG");
    }
    .profile-text h2 { font-size: 16px; letter-spacing: 0.06em; text-transform: uppercase; }
    .profile-text p { font-size: 12px; color: var(--text-muted); }

    .tag-list { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
    .tag {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: var(--radius-full);
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.5);
      color: var(--text-muted);
    }

    .section-title {
      margin-top: 8px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
    }
    .section-body { margin-top: 4px; font-size: 12px; color: var(--text-main); line-height: 1.6; }
    .section-body span { color: var(--accent); font-weight: 500; }

    .link-box {
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px dashed rgba(148, 163, 184, 0.6);
      font-size: 11px;
      color: var(--text-muted);
    }
    .link-box a { color: var(--accent); text-decoration: none; font-weight: 500; }
    .link-box a:hover { text-decoration: underline; }

    /* MOBILE */
    @media (max-width: 520px) {
      body { padding: 14px; }

      .card{
        padding: 14px;
        gap: 14px;
        border-radius: 18px;
      }

      .title-row h1 { font-size: 18px; line-height: 1.25; }
      .title-row span { font-size: 12px; }

      .pill-row { gap: 6px; }
      .pill { font-size: 10px; padding: 4px 8px; }

      .chatbox{
        height: 52vh;
        min-height: 320px;
        padding: 12px;
        border-radius: 14px;
        -webkit-overflow-scrolling: touch;
      }

      .message{
        max-width: 92%;
        font-size: 13px;
      }

      .input-area{ gap: 10px; }
      .input-wrapper input{
        padding: 12px 78px 12px 12px;
        font-size: 14px;
      }

      .send-btn{ padding: 11px 14px; }

      .bottom-menu{
        gap: 8px;
        padding-top: 12px;
      }

      .bm-btn{
        flex: 1 1 calc(50% - 4px);
        text-align: center;
        padding: 10px 12px;
        font-size: 12px;
      }

      .quick-questions{ gap: 8px; }
      .quick-btn{
        padding: 8px 10px;
        font-size: 12px;
      }

      .side-section{
        padding-top: 14px;
        gap: 12px;
      }
      .avatar{ width: 46px; height: 46px; }
      .profile-text h2{ font-size: 14px; }
    }

    body { min-height: 100dvh; }

    @media (max-width: 800px){
      body{
        align-items: flex-start;
        justify-content: flex-start;
      }
      .shell{ width: 100%; }
      .card{ width: 100%; }
    }

    @supports (padding: max(0px, 0px)) {
      body { padding-bottom: max(14px, env(safe-area-inset-bottom)); }
    }

    @media (max-width: 520px){
      .input-area{
        position: sticky;
        bottom: 10px;
        z-index: 10;
        padding: 10px;
        border-radius: 16px;
        background: rgba(2,6,23,0.75);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(148,163,184,0.25);
      }
    }

    @media (max-width: 520px){
      .chatbox{ padding-bottom: 120px; }
    }

    @media (max-width: 520px){
      .bottom-menu{ position: static; }
    }
  </style>
</head>

<body>
<div class="shell">
  <div class="card">
    <!-- SOL -->
    <section class="chat-section">
      <div class="badge">
        <span class="badge-dot"></span>
        <span class="badge-text" id="liveLabel">EBRAR AI ASSISTANT Â· LIVE</span>
        <button class="lang-toggle" id="langBtn" aria-label="Language Toggle">EN</button>
      </div>

      <div class="title-row">
        <h1 id="uiTitle">Ebrar'Ä±n Yapay ZekÃ¢ AsistanÄ±</h1>
        <span id="uiSubtitle">Ebrar Albayrak hakkÄ±nda daha fazla ÅŸey Ã¶ÄŸrenmek iÃ§in teknik ekiplerin kullanabileceÄŸi etkileÅŸimli tanÄ±tÄ±m asistanÄ±.</span>
      </div>

      <p class="intro" id="uiIntro">
        Ebrarâ€™Ä±n <span style="color:#f97316;">DevOps</span>,
        <span style="color:#f97316;">backend geliÅŸtirme</span> ve
        <span style="color:#f97316;">denetim otomasyonu</span> alanlarÄ±ndaki deneyimleriyle ilgili
        sorularÄ± buradan yÃ¶neltebilirsiniz.
      </p>

      <div class="pill-row">
        <div class="pill"><span class="pill-dot"></span> <span id="pill1">DevOps Â· CI/CD Â· Docker</span></div>
        <div class="pill"><span class="pill-dot"></span> <span id="pill2">FastAPI Â· Python Â· SQLAlchemy</span></div>
        <div class="pill"><span class="pill-dot"></span> <span id="pill3">Audit Automation Â· Data Workflows</span></div>
      </div>

      <div id="chat" class="chatbox"></div>

      <div class="input-area">
        <div class="input-wrapper">
          <input type="text" id="userInput" placeholder="Bir soru yazÄ±n... Ã–rn: 'Jenkins pipeline tecrÃ¼besi nasÄ±l?'" />
          <div class="shortcut-hint" id="hintEnter">Enter â†µ</div>
        </div>
        <button class="send-btn" id="sendBtn"><span id="sendText">GÃ¶nder</span> <span>âœ</span></button>
      </div>

      <div class="bottom-menu">
        <button class="bm-btn" data-bm="BACK_MENU" id="bmMain">Ana MenÃ¼</button>
        <button class="bm-btn" data-bm="MENU_INTERNSHIPS" id="bmIntern">Stajlar</button>
        <button class="bm-btn" data-bm="MENU_DEVOPS" id="bmDevops">DevOps</button>
        <button class="bm-btn" data-bm="MENU_AUDIT" id="bmAudit">Audit</button>
      </div>

      <div class="quick-questions">
        <button class="quick-btn" data-q-tr="Neden Ebrarâ€™Ä± iÅŸe almalÄ±yÄ±z?" data-q-en="Why should we hire Ebrar?">Why / Neden?</button>
        <button class="quick-btn" data-q-tr="Docker ve container tecrÃ¼besi nedir?" data-q-en="What is her Docker & container experience?">Docker</button>
        <button class="quick-btn" data-q-tr="Jenkins ve CI/CD sÃ¼reÃ§lerinde nasÄ±l bir rol aldÄ±?" data-q-en="What was her role in Jenkins & CI/CD?">Jenkins</button>
        <button class="quick-btn" data-q-tr="Audit automation projesi nasÄ±l Ã§alÄ±ÅŸÄ±yor?" data-q-en="How does the audit automation project work?">Audit Automation</button>
        <button class="quick-btn" data-q-tr="Hangi backend teknolojileriyle Ã§alÄ±ÅŸtÄ±?" data-q-en="Which backend technologies has she used?">Backend Stack</button>
      </div>
    </section>

    <!-- SAÄ -->
    <aside class="side-section">
      <div class="profile-row">
        <div class="avatar"></div>
        <div class="profile-text">
          <h2>EBRAR ALBAYRAK</h2>
          <p id="sideRole">DevOps & Backend Â· Ä°stanbul</p>
        </div>
      </div>

      <div class="tag-list">
        <div class="tag" id="tag1">DevOps Engineer</div>
        <div class="tag" id="tag2">Backend Developer</div>
        <div class="tag" id="tag3">Cloud & Automation</div>
      </div>

      <div>
        <div class="section-title" id="sideTitle1">Ã–ne Ã§Ä±kan alanlar</div>
        <div class="section-body" id="sideBody1">
          Ebrar; <span>Docker, Jenkins, FastAPI, SQLAlchemy, PostgreSQL</span> ve konteyner tabanlÄ± mimariler Ã¼zerinde Ã§alÄ±ÅŸan;
          aynÄ± zamanda <span>baÄŸÄ±msÄ±z denetim sÃ¼reÃ§lerini</span> otomatikleÅŸtiren hibrit bir DevOps & backend mÃ¼hendisidir.
        </div>
      </div>

      <div>
        <div class="section-title" id="sideTitle2">Neleri sorabilirsiniz?</div>
        <div class="section-body" id="sideBody2">
          â–¸ CI/CD pipeline Ã¶rnekleri<br />
          â–¸ Audit veri iÅŸleme ve Ã¶rnekleme otomasyonu (BDS 530)<br />
          â–¸ Mimari tercihler (modÃ¼ler yapÄ±, servis ayrÄ±mÄ±)<br />
          â–¸ Java / Python backend deneyimleri<br />
          â–¸ Docker & Compose deployment yaklaÅŸÄ±mÄ±
        </div>
      </div>

      <div class="link-box" id="sideLinks">
        Daha kapsamlÄ± bilgi iÃ§in Ebrarâ€™Ä±n
        <a href="https://www.linkedin.com/in/ebrar-a-585222201" target="_blank" rel="noopener noreferrer">LinkedIn profiline</a>
        ve
        <a href="https://medium.com/@ealbayrk0" target="_blank" rel="noopener noreferrer">Medium hesabÄ±na</a>
        gÃ¶z atabilirsiniz.<br/><br/>
        E-posta:
        <a href="mailto:ealbayrk0@gmail.com?subject=Ebrar%20AI%20Assistant%20-%20Contact">ealbayrk0@gmail.com</a>
      </div>
    </aside>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const chatEl = document.getElementById("chat");
  const inputEl = document.getElementById("userInput");
  const sendBtn = document.getElementById("sendBtn");
  const sendTextEl = document.getElementById("sendText");
  const langBtn = document.getElementById("langBtn");

  // ======================
  // LANGUAGE (TR/EN)
  // ======================
  let lang = localStorage.getItem("lang") || "tr"; // "tr" | "en"

  const I18N = {
    tr: {
      live: "EBRAR AI ASSISTANT Â· LIVE",
      title: "Ebrar'Ä±n Yapay ZekÃ¢ AsistanÄ±",
      subtitle: "Ebrar Albayrak hakkÄ±nda daha fazla ÅŸey Ã¶ÄŸrenmek iÃ§in teknik ekiplerin kullanabileceÄŸi etkileÅŸimli tanÄ±tÄ±m asistanÄ±.",
      intro: `Ebrarâ€™Ä±n <span style="color:#f97316;">DevOps</span>, <span style="color:#f97316;">backend geliÅŸtirme</span> ve <span style="color:#f97316;">denetim otomasyonu</span> alanlarÄ±ndaki deneyimleriyle ilgili sorularÄ± buradan yÃ¶neltebilirsiniz.`,
      placeholder: "Bir soru yazÄ±n... Ã–rn: 'Jenkins pipeline tecrÃ¼besi nasÄ±l?'",
      send: "GÃ¶nder",
      typing: "YazÄ±yor...",
      askName: "Merhaba ğŸ‘‹ Ben Ebrarâ€™Ä±n Yapay ZekÃ¢ AsistanÄ±yÄ±m.<br/><br/>Sizinle daha iyi iletiÅŸim kurabilmem iÃ§in isminizi Ã¶ÄŸrenebilir miyim?",
      askNameShort: "Merhaba ğŸ˜Š Ä°smini de paylaÅŸÄ±rsan sana daha kiÅŸisel yanÄ±t verebilirim.",
      nameYes: "Evet, ismimi paylaÅŸayÄ±m",
      nameNo: "HayÄ±r, isim vermeden devam",
      writeName: "Harika ğŸ˜Š Ä°sminizi yazabilir misiniz?",
      couldNotReadName: "Ä°smini anlayamadÄ±m ama sorun deÄŸil ğŸ™‚ Tekrar yazmak ister misin?",
      niceToMeet: (n)=>`TanÄ±ÅŸtÄ±ÄŸÄ±ma memnun oldum <b>${n}</b> â˜ºï¸`,
      niceToMeet2: (n)=>`Memnun oldum <b>${n}</b> ğŸ˜Š`,
      mainMenu: (n)=>`Harika${n?` <b>${n}</b>`:""}. AÅŸaÄŸÄ±daki baÅŸlÄ±klardan seÃ§ebilir veya serbest soru sorabilirsin:`,
      notLinked: "Bu baÅŸlÄ±k henÃ¼z baÄŸlÄ± deÄŸil. Ä°stersen <b>Ana MenÃ¼</b>den ilerleyelim ğŸ™‚",
      fallbackContact: `
        Bu noktada en doÄŸru cevabÄ± doÄŸrudan Ebrarâ€™Ä±n kendisinden almak daha anlamlÄ± olur.<br/><br/>
        Konuyla ilgili iletiÅŸime geÃ§mek istersen LinkedIn veya e-posta Ã¼zerinden ulaÅŸabilirsin:<br/><br/>
        <a href="https://www.linkedin.com/in/ebrar-a-585222201" target="_blank" rel="noopener noreferrer">Ebrar Albayrak â€“ LinkedIn</a><br/><br/>
        <a href="mailto:ealbayrk0@gmail.com">ealbayrk0@gmail.com</a>
      `,
      bm: { main:"Ana MenÃ¼", intern:"Stajlar", devops:"DevOps", audit:"Audit" },
      side: {
        role: "DevOps & Backend Â· Ä°stanbul",
        t1: "Ã–ne Ã§Ä±kan alanlar",
        b1: `Ebrar; <span>Docker, Jenkins, FastAPI, SQLAlchemy, PostgreSQL</span> ve konteyner tabanlÄ± mimariler Ã¼zerinde Ã§alÄ±ÅŸan;
             aynÄ± zamanda <span>baÄŸÄ±msÄ±z denetim sÃ¼reÃ§lerini</span> otomatikleÅŸtiren hibrit bir DevOps & backend mÃ¼hendisidir.`,
        t2: "Neleri sorabilirsiniz?",
        b2: `â–¸ CI/CD pipeline Ã¶rnekleri<br/>
             â–¸ Audit veri iÅŸleme ve Ã¶rnekleme otomasyonu (BDS 530)<br/>
             â–¸ Mimari tercihler (modÃ¼ler yapÄ±, servis ayrÄ±mÄ±)<br/>
             â–¸ Java / Python backend deneyimleri<br/>
             â–¸ Docker & Compose deployment yaklaÅŸÄ±mÄ±`
      }
    },
    en: {
      live: "EBRAR AI ASSISTANT Â· LIVE",
      title: "Ebrar's AI Assistant",
      subtitle: "An interactive intro assistant for technical teams to learn more about Ebrar Albayrak.",
      intro: `You can ask questions here about Ebrarâ€™s experience in <span style="color:#f97316;">DevOps</span>, <span style="color:#f97316;">backend engineering</span>, and <span style="color:#f97316;">audit automation</span>.`,
      placeholder: "Ask a question... e.g., 'Whatâ€™s your Jenkins CI/CD experience?'",
      send: "Send",
      typing: "Typing...",
      askName: "Hi ğŸ‘‹ I'm Ebrarâ€™s AI Assistant.<br/><br/>May I ask your name so I can personalize the conversation?",
      askNameShort: "Hi ğŸ˜Š If you share your name, I can answer more personally.",
      nameYes: "Yes, I'll share my name",
      nameNo: "Continue without a name",
      writeName: "Great ğŸ˜Š Could you type your name?",
      couldNotReadName: "I couldnâ€™t catch your name, but no worries ğŸ™‚ Want to try again?",
      niceToMeet: (n)=>`Nice to meet you <b>${n}</b> â˜ºï¸`,
      niceToMeet2: (n)=>`Nice to meet you <b>${n}</b> ğŸ˜Š`,
      mainMenu: (n)=>`Awesome${n?` <b>${n}</b>`:""}. Choose a topic below or ask anything:`,
      notLinked: "This item isnâ€™t connected yet. Letâ€™s continue from the <b>Main Menu</b> ğŸ™‚",
      fallbackContact: `
        The most accurate answer here would be from Ebrar directly.<br/><br/>
        You can reach out via LinkedIn or email:<br/><br/>
        <a href="https://www.linkedin.com/in/ebrar-a-585222201" target="_blank" rel="noopener noreferrer">Ebrar Albayrak â€“ LinkedIn</a><br/><br/>
        <a href="mailto:ealbayrk0@gmail.com">ealbayrk0@gmail.com</a>
      `,
      bm: { main:"Main Menu", intern:"Internships", devops:"DevOps", audit:"Audit" },
      side: {
        role: "DevOps & Backend Â· Istanbul",
        t1: "Highlights",
        b1: `Ebrar works on <span>Docker, Jenkins, FastAPI, SQLAlchemy, PostgreSQL</span> and container-based architectures,
             and also builds <span>audit automation</span> solutions with a strong product & process mindset.`,
        t2: "What can you ask?",
        b2: `â–¸ CI/CD pipeline examples<br/>
             â–¸ Audit data workflows & sampling automation (ISA/BDS 530)<br/>
             â–¸ Architecture choices (modularity, service boundaries)<br/>
             â–¸ Java / Python backend experience<br/>
             â–¸ Docker & Compose deployment approach`
      }
    }
  };

  const KB = {
    tr: {
      profile: `
        <b>Ebrar Albayrak</b>, DevOps ve Backend geliÅŸtirme odaÄŸÄ±nda; teknik yetkinliÄŸi iÅŸ ihtiyaÃ§larÄ±yla birleÅŸtiren,
        <b>sÃ¼reÃ§, sÃ¼rdÃ¼rÃ¼lebilirlik ve Ã¼rÃ¼nleÅŸme</b> perspektifine sahip bir mÃ¼hendis profilidir.<br/><br/>
        Kendini geliÅŸtirmeyi bir hedef olarak deÄŸil, <b>mesleki bir sorumluluk</b> olarak gÃ¶rÃ¼r.
        Her projeyi; daha doÄŸru mimari kurmak, tekrar eden problemleri otomasyona taÅŸÄ±mak ve sistemi daha Ã¶ngÃ¶rÃ¼lebilir hale getirmek iÃ§in bir fÄ±rsat olarak ele alÄ±r.<br/><br/>
        â€¢ <b>Docker & Docker Compose</b> ile tutarlÄ± ortamlar kurar<br/>
        â€¢ <b>Jenkins tabanlÄ± CI/CD</b> ile buildâ€“testâ€“imageâ€“deploy sÃ¼reÃ§lerini otomatikleÅŸtirir<br/>
        â€¢ <b>FastAPI, SQLAlchemy, PostgreSQL</b> ile bakÄ±m odaklÄ± backend servisleri geliÅŸtirir<br/>
        â€¢ <b>BDS 530</b> kapsamÄ±nda Ã¶rnekleme mantÄ±ÄŸÄ±nÄ± Ã¼rÃ¼nleÅŸtirip Word/Excel raporlarÄ± Ã¼retir
      `,
      strengths: `
        <b>Ä°nsan & Ekip OdaklÄ±</b><br/>
        â€¢ Sorumluluk bilinci Â· Geri bildirimle geliÅŸim Â· HÄ±zlÄ± adaptasyon Â· SÃ¼reÃ§ ÅŸeffaflÄ±ÄŸÄ±<br/><br/>
        <b>Teknik & Sistem OdaklÄ±</b><br/>
        â€¢ CI/CD & Jenkins Â· Docker/Compose ile reproducible ortam Â· ModÃ¼ler backend yaklaÅŸÄ±mÄ± Â· Otomasyon refleksi
      `,
      internships: {
        pia_devops: `
          <b>Pia BiliÅŸim â€“ DevOps Stajyeri</b><br/>
          â€¢ Jenkins Ã¼zerinde uÃ§tan uca CI/CD pipelineâ€™larÄ±<br/>
          â€¢ Maven/Docker entegrasyonu ile build-test-image sÃ¼reÃ§leri<br/>
          â€¢ Harbor/Nexus registryâ€™ye image push & versioning<br/>
          â€¢ Docker Compose ile tek komutla lokal ortam<br/>
          â€¢ KonfigÃ¼rasyon yÃ¶netimi (<code>.env</code>)<br/>
          <br/>
          <span style="color:#9ca3af">DeÄŸer:</span> onboarding hÄ±zlandÄ±, ortam tutarlÄ±lÄ±ÄŸÄ± ve release standardÄ± saÄŸlandÄ±.
        `,
        pia_fs: `
          <b>Pia BiliÅŸim â€“ Full Stack (Vodafone TÃ¼rkiye Projesi)</b><br/>
          â€¢ Frontendâ€“backendâ€“veri akÄ±ÅŸÄ± perspektifi<br/>
          â€¢ Ä°ÅŸ ihtiyaÃ§larÄ±nÄ± teknik Ã§Ã¶zÃ¼me Ã§evirme pratiÄŸi<br/>
          <br/>
          <span style="color:#9ca3af">DeÄŸer:</span> DevOps otomasyonunu geliÅŸtirici gÃ¶zÃ¼yle daha doÄŸru kurgulama.
        `,
        bkm: `
          <b>BKM â€“ DevOps Stajyeri</b><br/>
          â€¢ Jenkins + Groovy pipeline senaryolarÄ±<br/>
          â€¢ Maven/Gradle build sÃ¼reÃ§leri<br/>
          â€¢ Bitbucket â†’ Jenkins â†’ OpenShift deploy akÄ±ÅŸÄ±<br/>
          <br/>
          <span style="color:#9ca3af">DeÄŸer:</span> kurumsal Ã¶lÃ§ekte CI/CD ve deployment pratiÄŸi.
        `
      },
      devops: {
        docker: `
          Ebrarâ€™Ä±n gÃ¼Ã§lÃ¼ olduÄŸu ÅŸey â€œÃ§alÄ±ÅŸanÄ± Ã§alÄ±ÅŸÄ±r halde paketlemekâ€.<br/><br/>
          <b>Docker & Container</b> tarafÄ±nda servisleri ayrÄ± imageâ€™lar halinde yÃ¶netir; <b>Docker Compose</b> ile lokal ortamÄ± tek komutla ayaÄŸa kaldÄ±rÄ±r.<br/><br/>
          <b>Etki:</b> hÄ±zlÄ± onboarding, daha az â€œbende Ã§alÄ±ÅŸÄ±yorduâ€ problemi, daha Ã¶ngÃ¶rÃ¼lebilir release.
        `,
        cicd: `
          CI/CD yaklaÅŸÄ±mÄ±: â€œpipeline Ã§alÄ±ÅŸsÄ±nâ€ deÄŸil, <b>hata erken yakalansÄ±n</b> ve <b>teslimat hÄ±zlansÄ±n</b>.<br/><br/>
          â€¢ PR sonrasÄ± otomatik build/test<br/>
          â€¢ Docker image Ã¼retimi & registry push<br/>
          â€¢ Deploy akÄ±ÅŸÄ± (Compose/OpenShift)
        `,
        backend: `
          <b>Backend stack:</b> FastAPI + Python, ORM: SQLAlchemy, DB: PostgreSQL, container: Docker.<br/><br/>
          Ã‡alÄ±ÅŸma tarzÄ±: <b>modÃ¼ler yapÄ±</b>, <b>temiz endpoint</b>, <b>bakÄ±mÄ± kolay servis</b>.
        `,
        db: `
          <b>DB & SQLAlchemy</b><br/>
          â€¢ Model/iliÅŸki kurgularÄ±<br/>
          â€¢ PostgreSQL Ã¼zerinde veri akÄ±ÅŸÄ± & raporlama ihtiyaÃ§larÄ±na uygun tasarÄ±m
        `,
        obs: `
          <b>Observability</b> hedefi: prodâ€™da â€œneden bozuldu?â€ sorusuna hÄ±zlÄ± cevap.<br/>
          Ä°stenirse logging + healthcheck + basic metrics yol haritasÄ± Ã§Ä±karÄ±lÄ±r.
        `
      },
      audit: {
        overview: `
          <b>Denetim Otomasyonu Projesi</b><br/>
          Denetimde tekrarlayan adÄ±mlarÄ± daha <b>dÃ¼zenli</b>, <b>tutarlÄ±</b> ve <b>izlenebilir</b> hale getirmeyi amaÃ§lar.
        `,
        features: `
          <b>Ã–ne Ã§Ä±kan Ã¶zellikler</b><br/>
          â€¢ KontrollÃ¼ iÅŸ akÄ±ÅŸlarÄ±<br/>
          â€¢ Standart raporlama (Word/Excel)<br/>
          â€¢ Okunabilir Ã§Ä±ktÄ± formatlarÄ±<br/>
          â€¢ Denetim ekibine yakÄ±n UX
        `,
        technologies: `
          <b>Teknolojiler</b><br/>
          â€¢ FastAPI Â· Python<br/>
          â€¢ pandas ile veri iÅŸleme<br/>
          â€¢ Word & Excel Ã§Ä±ktÄ±larÄ±<br/>
          â€¢ Docker ile containerize yapÄ±
        `,
        value: `
          <b>Katma deÄŸer</b><br/>
          â€¢ Zaman tasarrufu Â· StandartlaÅŸma Â· Manuel hatalarÄ±n azalmasÄ± Â· Kolay kurulum
        `
      },
      thesis: {
        overview: `
          <b>Trade Center (Bitirme Projesi)</b><br/>
          BIST100 ve kripto iÃ§in kural tabanlÄ± sinyal Ã¼reten ve panelden izlenebilir hale getiren algoritmik trading platformu.
        `,
        problem: `
          <b>Problem</b><br/>
          Manuel iÅŸlem: zaman baskÄ±sÄ±, duygusal kararlar, tutarsÄ±z strateji uygulamasÄ± risklerini artÄ±rÄ±r.
        `,
        architecture: `
          <b>Mimari</b><br/>
          â€¢ ASP.NET Core MVC Web<br/>
          â€¢ Python Bot Worker<br/>
          â€¢ DB katmanÄ± (kalÄ±cÄ± kayÄ±t)
        `,
        features: `
          <b>Ã–zellikler</b><br/>
          â€¢ Sinyal Ã¼retimi & kayÄ±t<br/>
          â€¢ Dashboard metrikleri<br/>
          â€¢ Paper trading
        `,
        technologies: `
          <b>Teknolojiler</b><br/>
          ASP.NET Core MVC Â· EF Core Â· MSSQL Â· Python Â· SendGrid
        `,
        security: `
          <b>GÃ¼venlik</b><br/>
          2FA Â· oturum gÃ¼venliÄŸi Â· API key korumasÄ±
        `,
        tests: `
          <b>Test</b><br/>
          Unit/Acceptance/Performance/Security test yaklaÅŸÄ±mÄ±
        `,
        results: `
          <b>SonuÃ§</b><br/>
          Strateji sinyali Ã¼retimi ve performans takibi baÅŸarÄ±yla yapÄ±ldÄ±; geliÅŸtirme iÃ§in event-driven mimari hedeflenebilir.
        `
      },
      interview: `
        <b>MÃ¼lakat Modu</b><br/>
        â€¢ â€œKendini anlatâ€<br/>
        â€¢ â€œCI/CD Ã¶rneÄŸin?â€<br/>
        â€¢ â€œDocker/Compose ile nasÄ±l deploy edersin?â€<br/>
        â€¢ â€œAudit automationâ€™da en zor kÄ±sÄ±m neydi?â€
      `,
      thanks: `
        Rica ederim ğŸ˜Š<br/><br/>
        <b>Ebrar aradÄ±ÄŸÄ±n aday profiline Ã§ok yakÄ±n</b>.<br/>
        DevOps & backend + denetim otomasyonu tarafÄ±nda Ã¼rÃ¼nleÅŸme bakÄ±ÅŸÄ± var.
      `,
      whyHire: `
        <b>Neden Ebrar?</b><br/><br/>
        Teknik kararlarÄ±nÄ± yalnÄ±zca â€œÃ§alÄ±ÅŸan Ã§Ã¶zÃ¼mâ€ iÃ§in deÄŸil; <b>Ã¼rÃ¼nleÅŸme</b>, <b>sÃ¼rdÃ¼rÃ¼lebilirlik</b> ve <b>standartlaÅŸma</b> iÃ§in alÄ±r.<br/><br/>
        CI/CD, Docker ve backend tarafÄ±nda tekrar Ã¼retilebilir, bakÄ±mÄ± kolay yapÄ±lar kurgular.<br/>
        Denetim otomasyonu gibi domain-heavy alanlarda iÅŸi anlayÄ±p doÄŸru teknik mimariye dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r.
      `,
      contact: `
        <b>Ebrarâ€™a ulaÅŸmak iÃ§in:</b><br/><br/>
        â€¢ LinkedIn: <a href="https://www.linkedin.com/in/ebrar-a-585222201" target="_blank" rel="noopener noreferrer">profil</a><br/>
        â€¢ Medium: <a href="https://medium.com/@ealbayrk0" target="_blank" rel="noopener noreferrer">yazÄ±larÄ±m</a><br/>
        â€¢ Email: <a href="mailto:ealbayrk0@gmail.com">ealbayrk0@gmail.com</a>
      `
    },

    en: {
      profile: `
        <b>Ebrar Albayrak</b> is a DevOps & Backend-focused engineer who connects technical execution with real business needs,
        with a strong mindset around <b>process, sustainability, and productization</b>.<br/><br/>
        She treats learning not as a goal but as a <b>professional responsibility</b>.
        In each project, she aims to build better architecture, automate recurring problems, and make delivery more predictable.<br/><br/>
        â€¢ Builds reproducible environments with <b>Docker & Docker Compose</b><br/>
        â€¢ Automates buildâ€“testâ€“imageâ€“deploy workflows with <b>Jenkins-based CI/CD</b><br/>
        â€¢ Develops maintainable backend services with <b>FastAPI, SQLAlchemy, PostgreSQL</b><br/>
        â€¢ Productizes audit sampling logic (ISA/BDS 530) and generates Word/Excel reports
      `,
      strengths: `
        <b>People & Team</b><br/>
        â€¢ Ownership Â· Feedback-driven growth Â· Fast adaptation Â· Transparent execution<br/><br/>
        <b>Technical & System</b><br/>
        â€¢ CI/CD & Jenkins Â· Reproducible environments with Docker/Compose Â· Modular backend mindset Â· Automation-first approach
      `,
      internships: {
        pia_devops: `
          <b>Pia Bilisim â€“ DevOps Intern</b><br/>
          â€¢ End-to-end CI/CD pipelines in Jenkins<br/>
          â€¢ Maven/Docker integration for build-test-image workflows<br/>
          â€¢ Image push & versioning in Harbor/Nexus registries<br/>
          â€¢ One-command local environments via Docker Compose<br/>
          â€¢ Config management via <code>.env</code><br/><br/>
          <span style="color:#9ca3af">Impact:</span> faster onboarding, consistent environments, standardized releases.
        `,
        pia_fs: `
          <b>Pia Bilisim â€“ Full Stack Intern (Vodafone Turkey Project)</b><br/>
          â€¢ End-to-end understanding of frontendâ€“backendâ€“data flow<br/>
          â€¢ Translating business needs into technical solutions<br/><br/>
          <span style="color:#9ca3af">Impact:</span> stronger developer perspective to design DevOps automation.
        `,
        bkm: `
          <b>BKM â€“ DevOps Intern</b><br/>
          â€¢ Jenkins + Groovy pipeline scenarios<br/>
          â€¢ Maven/Gradle build workflows<br/>
          â€¢ Bitbucket â†’ Jenkins â†’ OpenShift deployment flow<br/><br/>
          <span style="color:#9ca3af">Impact:</span> hands-on enterprise CI/CD and deployment practices.
        `
      },
      devops: {
        docker: `
          Ebrarâ€™s strength is â€œpackaging what works â€” and making it reproducibleâ€.<br/><br/>
          She manages services as separate images and uses <b>Docker Compose</b> for one-command local environments.<br/><br/>
          <b>Impact:</b> faster onboarding, fewer â€œworks on my machineâ€ issues, more predictable releases.
        `,
        cicd: `
          Her CI/CD mindset is not just â€œpipeline runsâ€, but <b>fail fast</b> and <b>ship faster</b>.<br/><br/>
          â€¢ Automated build/test after PR<br/>
          â€¢ Image build + registry push<br/>
          â€¢ Deployment flow (Compose/OpenShift)
        `,
        backend: `
          <b>Backend stack:</b> FastAPI + Python, ORM: SQLAlchemy, DB: PostgreSQL, containerized with Docker.<br/><br/>
          Focus: <b>modularity</b>, <b>clean endpoints</b>, <b>maintainability</b>.
        `,
        db: `
          <b>DB & SQLAlchemy</b><br/>
          â€¢ Models & relationships<br/>
          â€¢ PostgreSQL designs aligned with data workflows & reporting needs
        `,
        obs: `
          <b>Observability</b> goal: answer â€œwhat broke and why?â€ quickly in production.<br/>
          Can outline logging + health checks + basic metrics if needed.
        `
      },
      audit: {
        overview: `
          <b>Audit Automation Project</b><br/>
          A product-oriented approach to make repetitive audit steps more <b>structured</b>, <b>consistent</b>, and <b>traceable</b>.
        `,
        features: `
          <b>Key features</b><br/>
          â€¢ Guided workflows<br/>
          â€¢ Standard reporting (Word/Excel)<br/>
          â€¢ Readable outputs<br/>
          â€¢ UX aligned with audit teams
        `,
        technologies: `
          <b>Tech</b><br/>
          â€¢ FastAPI Â· Python<br/>
          â€¢ pandas for data processing<br/>
          â€¢ Word & Excel exports<br/>
          â€¢ Docker-based packaging
        `,
        value: `
          <b>Value</b><br/>
          â€¢ Time savings Â· Standardization Â· Fewer manual errors Â· Easy setup
        `
      },
      thesis: {
        overview: `
          <b>Trade Center (Capstone)</b><br/>
          An algorithmic trading platform that generates rule-based signals for BIST100 & crypto and provides a dashboard to track results.
        `,
        problem: `
          <b>Problem</b><br/>
          Manual trading increases risks such as time pressure, emotional decisions, and inconsistent strategy execution.
        `,
        architecture: `
          <b>Architecture</b><br/>
          â€¢ ASP.NET Core MVC Web<br/>
          â€¢ Python Bot Worker<br/>
          â€¢ DB layer (persistent records)
        `,
        features: `
          <b>Features</b><br/>
          â€¢ Signal generation & logging<br/>
          â€¢ Dashboard metrics<br/>
          â€¢ Paper trading
        `,
        technologies: `
          <b>Technologies</b><br/>
          ASP.NET Core MVC Â· EF Core Â· MSSQL Â· Python Â· SendGrid
        `,
        security: `
          <b>Security</b><br/>
          2FA Â· session security Â· API key protection
        `,
        tests: `
          <b>Testing</b><br/>
          Unit/Acceptance/Performance/Security testing approach
        `,
        results: `
          <b>Results</b><br/>
          Achieved signal generation and performance tracking; next steps can include event-driven architecture improvements.
        `
      },
      interview: `
        <b>Interview Mode</b><br/>
        â€¢ â€œTell me about yourselfâ€<br/>
        â€¢ â€œYour CI/CD example?â€<br/>
        â€¢ â€œHow do you deploy with Docker/Compose?â€<br/>
        â€¢ â€œHardest part in audit automation?â€
      `,
      thanks: `
        You're welcome ğŸ˜Š<br/><br/>
        <b>Ebrar is very close to the profile youâ€™re looking for</b>.<br/>
        Strong product/process mindset across DevOps, backend, and audit automation.
      `,
      whyHire: `
        <b>Why Ebrar?</b><br/><br/>
        She makes technical decisions not only to â€œmake it workâ€, but to ensure <b>productization</b>, <b>sustainability</b>, and <b>team-level standardization</b>.<br/><br/>
        She builds reproducible CI/CD, Docker, and backend solutions that are easy to maintain.  
        She can also translate domain-heavy audit workflows into the right technical architecture.
      `,
      contact: `
        <b>Contact Ebrar:</b><br/><br/>
        â€¢ LinkedIn: <a href="https://www.linkedin.com/in/ebrar-a-585222201" target="_blank" rel="noopener noreferrer">profile</a><br/>
        â€¢ Medium: <a href="https://medium.com/@ealbayrk0" target="_blank" rel="noopener noreferrer">articles</a><br/>
        â€¢ Email: <a href="mailto:ealbayrk0@gmail.com">ealbayrk0@gmail.com</a>
      `
    }
  };

  // ======================
  // UI HELPERS
  // ======================
  function appendMessage(html, who) {
    const msg = document.createElement("div");
    msg.className = "message " + who;
    msg.innerHTML = html;
    chatEl.appendChild(msg);
    chatEl.scrollTop = chatEl.scrollHeight;
  }

  function botSay(text, choices) {
    let html = text;
    if (choices && choices.length) {
      html += `<div class="choice-wrap">
        ${choices.map(c => `
          <button class="choice-btn ${c.secondary ? "secondary" : ""}" data-choice="${c.value}">
            ${c.label}
          </button>
        `).join("")}
      </div>`;
    }
    appendMessage(html, "bot");
  }

  function userSay(text) { appendMessage(text, "user"); }

  function typing(ms=350){
    const t = document.createElement("div");
    t.className = "message bot";
    t.textContent = I18N[lang].typing;
    chatEl.appendChild(t);
    chatEl.scrollTop = chatEl.scrollHeight;
    return new Promise(res => setTimeout(() => { t.remove(); res(); }, ms));
  }

  // ======================
  // STATE
  // ======================
  let state = "askName";       // askName | awaitingName | mainMenu | internships | devopsMenu | auditMenu | thesisMenu
  let userName = null;

  // ======================
  // LABELS (CHOICE)
  // ======================
  const mapLabel = {
    tr: {
      NAME_YES: "Evet, ismimi paylaÅŸayÄ±m",
      NAME_NO: "HayÄ±r, isim vermeden devam",
      MENU_PROFILE: "Ebrar Kimdir?",
      MENU_STRENGTHS: "GÃ¼Ã§lÃ¼ yÃ¶nler",
      MENU_INTERNSHIPS: "Stajlar",
      MENU_DEVOPS: "DevOps & Backend",
      MENU_AUDIT: "Audit Otomasyonu",
      MENU_THESIS: "Bitirme Projesi",
      MENU_INTERVIEW: "MÃ¼lakat Modu",
      MENU_CONTACT: "Ä°letiÅŸim",

      INT_BKM: "BKM â€“ DevOps",
      INT_PIA_DEVOPS: "Pia â€“ DevOps",
      INT_PIA_FS: "Pia â€“ Full Stack",

      DEVOPS_DOCKER: "Docker & Container",
      DEVOPS_CICD: "CI/CD (Jenkins)",
      DEVOPS_BACKEND: "FastAPI & Backend",
      DEVOPS_DB: "DB & SQLAlchemy",
      DEVOPS_OBS: "Observability",

      AUDIT_OVERVIEW: "Proje Ã–zeti",
      AUDIT_FEATURES: "Ã–zellikler",
      AUDIT_VALUE: "Katma DeÄŸer",
      AUDIT_TECH: "Teknolojiler",

      THESIS_OVERVIEW: "Proje Ã–zeti",
      THESIS_PROBLEM: "Problem & Motivasyon",
      THESIS_ARCH: "Mimari",
      THESIS_FEATURES: "Ã–zellikler",
      THESIS_TECH: "Teknolojiler",
      THESIS_SECURITY: "GÃ¼venlik",
      THESIS_TESTS: "Testler",
      THESIS_RESULTS: "SonuÃ§ & Gelecek",

      BACK_MENU: "Ana MenÃ¼"
    },
    en: {
      NAME_YES: "Yes, I'll share my name",
      NAME_NO: "Continue without a name",
      MENU_PROFILE: "Who is Ebrar?",
      MENU_STRENGTHS: "Strengths",
      MENU_INTERNSHIPS: "Internships",
      MENU_DEVOPS: "DevOps & Backend",
      MENU_AUDIT: "Audit Automation",
      MENU_THESIS: "Capstone Project",
      MENU_INTERVIEW: "Interview Mode",
      MENU_CONTACT: "Contact",

      INT_BKM: "BKM â€“ DevOps",
      INT_PIA_DEVOPS: "Pia â€“ DevOps",
      INT_PIA_FS: "Pia â€“ Full Stack",

      DEVOPS_DOCKER: "Docker & Containers",
      DEVOPS_CICD: "CI/CD (Jenkins)",
      DEVOPS_BACKEND: "FastAPI & Backend",
      DEVOPS_DB: "DB & SQLAlchemy",
      DEVOPS_OBS: "Observability",

      AUDIT_OVERVIEW: "Overview",
      AUDIT_FEATURES: "Features",
      AUDIT_VALUE: "Value",
      AUDIT_TECH: "Tech Stack",

      THESIS_OVERVIEW: "Overview",
      THESIS_PROBLEM: "Problem",
      THESIS_ARCH: "Architecture",
      THESIS_FEATURES: "Features",
      THESIS_TECH: "Technologies",
      THESIS_SECURITY: "Security",
      THESIS_TESTS: "Testing",
      THESIS_RESULTS: "Results & Next",

      BACK_MENU: "Main Menu"
    }
  };

  // ======================
  // MENUS
  // ======================
  function startFlow(){
    state = "askName";
    botSay(
      I18N[lang].askName,
      [
        {label:I18N[lang].nameYes, value:"NAME_YES"},
        {label:I18N[lang].nameNo, value:"NAME_NO", secondary:true}
      ]
    );
  }

  function goMainMenu(){
    state = "mainMenu";
    botSay(
      I18N[lang].mainMenu(userName),
      [
        {label: mapLabel[lang].MENU_PROFILE, value:"MENU_PROFILE"},
        {label: mapLabel[lang].MENU_STRENGTHS, value:"MENU_STRENGTHS"},
        {label: mapLabel[lang].MENU_INTERNSHIPS, value:"MENU_INTERNSHIPS"},
        {label: mapLabel[lang].MENU_DEVOPS, value:"MENU_DEVOPS"},
        {label: mapLabel[lang].MENU_AUDIT, value:"MENU_AUDIT"},
        {label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},
        {label: mapLabel[lang].MENU_INTERVIEW, value:"MENU_INTERVIEW", secondary:true},
        {label: mapLabel[lang].MENU_CONTACT, value:"MENU_CONTACT", secondary:true},
      ]
    );
  }

  function goInternships(){
    state = "internships";
    botSay(
      (lang==="tr" ? "Ebrarâ€™Ä±n stajlarÄ±ndan hangisiyle devam edelim?" : "Which internship would you like to explore?"),
      [
        {label: mapLabel[lang].INT_BKM, value:"INT_BKM"},
        {label: mapLabel[lang].INT_PIA_DEVOPS, value:"INT_PIA_DEVOPS"},
        {label: mapLabel[lang].INT_PIA_FS, value:"INT_PIA_FS"},
        {label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}
      ]
    );
  }

  function goDevopsMenu(){
    state = "devopsMenu";
    botSay(
      (lang==="tr" ? "DevOps & Backend tarafÄ±nda hangi baÅŸlÄ±kla baÅŸlayalÄ±m?" : "Which DevOps/Backend topic should we start with?"),
      [
        {label: mapLabel[lang].DEVOPS_DOCKER, value:"DEVOPS_DOCKER"},
        {label: mapLabel[lang].DEVOPS_CICD, value:"DEVOPS_CICD"},
        {label: mapLabel[lang].DEVOPS_BACKEND, value:"DEVOPS_BACKEND"},
        {label: mapLabel[lang].DEVOPS_DB, value:"DEVOPS_DB"},
        {label: mapLabel[lang].DEVOPS_OBS, value:"DEVOPS_OBS", secondary:true},
        {label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true},
      ]
    );
  }

  function goAuditMenu(){
    state = "auditMenu";
    botSay(
      (lang==="tr" ? "Audit otomasyonu tarafÄ±nda neyi gÃ¶rmek istersin?" : "What would you like to see about audit automation?"),
      [
        {label: mapLabel[lang].AUDIT_OVERVIEW, value:"AUDIT_OVERVIEW"},
        {label: mapLabel[lang].AUDIT_FEATURES, value:"AUDIT_FEATURES"},
        {label: mapLabel[lang].AUDIT_VALUE, value:"AUDIT_VALUE"},
        {label: mapLabel[lang].AUDIT_TECH, value:"AUDIT_TECH"},
        {label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true},
      ]
    );
  }

  function goThesisMenu(){
    state = "thesisMenu";
    botSay(
      (lang==="tr" ? "Bitirme projesinde hangi kÄ±smÄ± gÃ¶rmek istersin?" : "Which part of the capstone project would you like to see?"),
      [
        {label: mapLabel[lang].THESIS_OVERVIEW, value:"THESIS_OVERVIEW"},
        {label: mapLabel[lang].THESIS_PROBLEM, value:"THESIS_PROBLEM"},
        {label: mapLabel[lang].THESIS_ARCH, value:"THESIS_ARCH"},
        {label: mapLabel[lang].THESIS_FEATURES, value:"THESIS_FEATURES"},
        {label: mapLabel[lang].THESIS_TECH, value:"THESIS_TECH"},
        {label: mapLabel[lang].THESIS_SECURITY, value:"THESIS_SECURITY"},
        {label: mapLabel[lang].THESIS_TESTS, value:"THESIS_TESTS"},
        {label: mapLabel[lang].THESIS_RESULTS, value:"THESIS_RESULTS"},
        {label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true},
      ]
    );
  }

  // ======================
  // CHOICE HANDLER
  // ======================
  async function handleChoice(value, clickedButton){
    const wrap = clickedButton?.closest?.(".choice-wrap");
    if (wrap) wrap.querySelectorAll("button").forEach(b => b.disabled = true);

    userSay(mapLabel[lang][value] || value);
    await typing(220);

    // name flow
    if (value === "NAME_YES"){
      state = "awaitingName";
      botSay(I18N[lang].writeName);
      return;
    }
    if (value === "NAME_NO"){
      userName = null;
      goMainMenu();
      return;
    }

    // menus
    if (value === "BACK_MENU"){ goMainMenu(); return; }
    if (value === "MENU_INTERNSHIPS"){ goInternships(); return; }
    if (value === "MENU_DEVOPS"){ goDevopsMenu(); return; }
    if (value === "MENU_AUDIT"){ goAuditMenu(); return; }
    if (value === "MENU_THESIS"){ goThesisMenu(); return; }

    // top pages
    if (value === "MENU_PROFILE"){ botSay(KB[lang].profile, [{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "MENU_STRENGTHS"){ botSay(KB[lang].strengths, [{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "MENU_INTERVIEW"){ botSay(KB[lang].interview, [{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "MENU_CONTACT"){ botSay(KB[lang].contact, [{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }

    // internships
    if (value === "INT_BKM"){
      botSay(KB[lang].internships.bkm, [
        {label: mapLabel[lang].MENU_INTERNSHIPS, value:"MENU_INTERNSHIPS"},
        {label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}
      ]);
      return;
    }
    if (value === "INT_PIA_DEVOPS"){
      botSay(KB[lang].internships.pia_devops, [
        {label: mapLabel[lang].MENU_INTERNSHIPS, value:"MENU_INTERNSHIPS"},
        {label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}
      ]);
      return;
    }
    if (value === "INT_PIA_FS"){
      botSay(KB[lang].internships.pia_fs, [
        {label: mapLabel[lang].MENU_INTERNSHIPS, value:"MENU_INTERNSHIPS"},
        {label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}
      ]);
      return;
    }

    // thesis items
    if (value === "THESIS_OVERVIEW"){ botSay(KB[lang].thesis.overview, [{label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "THESIS_PROBLEM"){ botSay(KB[lang].thesis.problem, [{label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "THESIS_ARCH"){ botSay(KB[lang].thesis.architecture, [{label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "THESIS_FEATURES"){ botSay(KB[lang].thesis.features, [{label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "THESIS_TECH"){ botSay(KB[lang].thesis.technologies, [{label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "THESIS_SECURITY"){ botSay(KB[lang].thesis.security, [{label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "THESIS_TESTS"){ botSay(KB[lang].thesis.tests, [{label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "THESIS_RESULTS"){ botSay(KB[lang].thesis.results, [{label: mapLabel[lang].MENU_THESIS, value:"MENU_THESIS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }

    // devops items
    if (value === "DEVOPS_DOCKER"){ botSay(KB[lang].devops.docker, [{label: mapLabel[lang].MENU_DEVOPS, value:"MENU_DEVOPS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "DEVOPS_CICD"){ botSay(KB[lang].devops.cicd, [{label: mapLabel[lang].MENU_DEVOPS, value:"MENU_DEVOPS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "DEVOPS_BACKEND"){ botSay(KB[lang].devops.backend, [{label: mapLabel[lang].MENU_DEVOPS, value:"MENU_DEVOPS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "DEVOPS_DB"){ botSay(KB[lang].devops.db, [{label: mapLabel[lang].MENU_DEVOPS, value:"MENU_DEVOPS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "DEVOPS_OBS"){ botSay(KB[lang].devops.obs, [{label: mapLabel[lang].MENU_DEVOPS, value:"MENU_DEVOPS"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }

    // audit items
    if (value === "AUDIT_OVERVIEW"){ botSay(KB[lang].audit.overview, [{label: mapLabel[lang].MENU_AUDIT, value:"MENU_AUDIT"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "AUDIT_FEATURES"){ botSay(KB[lang].audit.features, [{label: mapLabel[lang].MENU_AUDIT, value:"MENU_AUDIT"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "AUDIT_VALUE"){ botSay(KB[lang].audit.value, [{label: mapLabel[lang].MENU_AUDIT, value:"MENU_AUDIT"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }
    if (value === "AUDIT_TECH"){ botSay(KB[lang].audit.technologies, [{label: mapLabel[lang].MENU_AUDIT, value:"MENU_AUDIT"},{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU", secondary:true}]); return; }

    botSay(I18N[lang].notLinked, [{label: mapLabel[lang].BACK_MENU, value:"BACK_MENU"}]);
  }

  // ======================
  // SEARCH KB (FREE TEXT)
  // ======================
  function normalizeText(text) {
    // TR characters -> ASCII to match both languages safely
    return (text || "")
      .toLowerCase()
      .replace(/Ä±/g, "i")
      .replace(/ÅŸ/g, "s")
      .replace(/ÄŸ/g, "g")
      .replace(/Ã¼/g, "u")
      .replace(/Ã¶/g, "o")
      .replace(/Ã§/g, "c")
      .replace(/Ã¢|Ã®|Ã»/g, "")
      .trim();
  }

  function extractName(text){
    const raw = (text || "").trim();
    if (/^[a-zA-ZÃ§ÄŸÄ±Ã¶ÅŸÃ¼Ä°ÄÃœÅÃ–Ã‡]{2,20}$/.test(raw)) return raw;

    const patterns = [
      /(?:ben|adim|adÄ±m|ismim)\s+([a-zA-ZÃ§ÄŸÄ±Ã¶ÅŸÃ¼Ä°ÄÃœÅÃ–Ã‡]{2,20})/i,
      /(?:my name is|i am)\s+([a-zA-Z]{2,20})/i
    ];
    for (const p of patterns){
      const m = raw.match(p);
      if (m) return m[1];
    }
    return null;
  }

  function getKnowledgeBase(){
    // language-specific keywords and answers
    return [
      {
        keywords: (lang==="tr")
          ? ["tesekkur","tesekkurler","teÅŸekkÃ¼r","teÅŸekkÃ¼rler","sagol","saÄŸol","eyvallah","thanks","thank you"]
          : ["thanks","thank you","appreciate","cheers"],
        answer: KB[lang].thanks
      },
      {
        keywords: (lang==="tr")
          ? ["neden ebrar","neden ise almalÄ±yÄ±z","neden iÅŸe almalÄ±yÄ±z","neden secmeliyim","why hire","why ebrar"]
          : ["why ebrar","why should we hire","why hire ebrar","reason to hire"],
        answer: KB[lang].whyHire
      },
      {
        keywords: ["docker","container","compose","docker compose","image","registry","harbor","nexus","konteyner"],
        answer: KB[lang].devops.docker
      },
      {
        keywords: ["jenkins","ci","cd","ci/cd","pipeline","groovy","automation","otomasyon","deploy","release","build","test"],
        answer: KB[lang].devops.cicd
      },
      {
        keywords: ["backend","api","fastapi","python","service","endpoint","microservice","servis","rest"],
        answer: KB[lang].devops.backend
      },
      {
        keywords: ["sql","database","postgres","postgresql","sqlalchemy","orm","schema","migration","veritabani"],
        answer: KB[lang].devops.db
      },
      {
        keywords: ["audit","denetim","sampling","orneklem","Ã¶rneklem","bds 530","isa 530","materiality","materyalite","rapor","report","excel","word"],
        answer: KB[lang].audit.overview + "<br/><br/>" + KB[lang].audit.features
      },
      {
        keywords: ["thesis","tez","bitirme","capstone","trade center","crypto","kripto","bist","asp.net","2fa","security"],
        answer: "__OPEN_THESIS_MENU__"
      },
      {
        keywords: ["contact","iletisim","iletiÅŸim","linkedin","email","mail","github","profil"],
        answer: KB[lang].contact
      }
    ];
  }

  function findBestAnswer(text){
    const input = normalizeText(text);
    const kb = getKnowledgeBase();
    let best = null, bestScore = 0;

    for (const item of kb){
      let score = 0;
      for (const kw of item.keywords){
        const normKw = normalizeText(kw);
        if (!normKw) continue;
        if (normKw.length <= 2) {
          const re = new RegExp(`(^|\\s)${normKw}(\\s|$)`, "i");
          if (re.test(input)) score++;
          continue;
        }
        if (input.includes(normKw)) score++;
      }
      if (score > bestScore){
        bestScore = score;
        best = item.answer;
      }
    }
    return bestScore > 0 ? best : I18N[lang].fallbackContact;
  }

  // ======================
  // SEND MESSAGE
  // ======================
  async function sendMessage(){
    const text = inputEl.value.trim();
    if (!text) return;

    userSay(text);
    inputEl.value = "";

    await typing(320);

    // If user is being asked for name
    if (state === "awaitingName"){
      const extracted = extractName(text);
      if (extracted){
        userName = extracted;
        botSay(I18N[lang].niceToMeet(userName));
        await typing(200);
        goMainMenu();
      } else {
        botSay(I18N[lang].couldNotReadName);
      }
      return;
    }

    // If at askName state, DO NOT block user.
    // Allow both: name OR directly answer and then show menu.
    if (state === "askName"){
      const extracted = extractName(text);
      if (extracted){
        userName = extracted;
        botSay(I18N[lang].niceToMeet2(userName));
        await typing(200);
        goMainMenu();
        return;
      }

      // User didn't give name: answer question instead of insisting
      const ans = findBestAnswer(text);
      if (ans === "__OPEN_THESIS_MENU__"){ goThesisMenu(); return; }
      botSay(ans, [{label: I18N[lang].nameNo, value:"NAME_NO", secondary:true}]);
      // Also push to main menu after answering once
      await typing(200);
      goMainMenu();
      return;
    }

    const ans = findBestAnswer(text);
    if (ans === "__OPEN_THESIS_MENU__"){ goThesisMenu(); return; }
    botSay(ans);
  }

  // ======================
  // APPLY LANGUAGE TO UI
  // ======================
  function applyLang(){
    document.documentElement.lang = lang;

    document.getElementById("liveLabel").innerText = I18N[lang].live;
    document.getElementById("uiTitle").innerText = I18N[lang].title;
    document.getElementById("uiSubtitle").innerText = I18N[lang].subtitle;
    document.getElementById("uiIntro").innerHTML = I18N[lang].intro;

    document.getElementById("pill1").innerText = (lang==="tr") ? "DevOps Â· CI/CD Â· Docker" : "DevOps Â· CI/CD Â· Docker";
    document.getElementById("pill2").innerText = (lang==="tr") ? "FastAPI Â· Python Â· SQLAlchemy" : "FastAPI Â· Python Â· SQLAlchemy";
    document.getElementById("pill3").innerText = (lang==="tr") ? "Audit Automation Â· Data Workflows" : "Audit Automation Â· Data Workflows";

    inputEl.placeholder = I18N[lang].placeholder;
    sendTextEl.innerText = I18N[lang].send;

    langBtn.textContent = (lang === "tr") ? "EN" : "TR";

    // bottom menu
    document.getElementById("bmMain").innerText = I18N[lang].bm.main;
    document.getElementById("bmIntern").innerText = I18N[lang].bm.intern;
    document.getElementById("bmDevops").innerText = I18N[lang].bm.devops;
    document.getElementById("bmAudit").innerText = I18N[lang].bm.audit;

    // right side
    document.getElementById("sideRole").innerText = I18N[lang].side.role;
    document.getElementById("sideTitle1").innerText = I18N[lang].side.t1;
    document.getElementById("sideBody1").innerHTML = I18N[lang].side.b1;
    document.getElementById("sideTitle2").innerText = I18N[lang].side.t2;
    document.getElementById("sideBody2").innerHTML = I18N[lang].side.b2;
  }

  // ======================
  // EVENTS
  // ======================
  chatEl.addEventListener("click", (e) => {
    const btn = e.target.closest(".choice-btn");
    if (!btn) return;
    const value = btn.getAttribute("data-choice");
    handleChoice(value, btn);
  });

  document.addEventListener("click", (e) => {
    const bm = e.target.closest(".bm-btn");
    if (!bm) return;
    const v = bm.getAttribute("data-bm");
    handleChoice(v, bm);
  });

  document.addEventListener("click", (e) => {
    const qb = e.target.closest(".quick-btn");
    if (!qb) return;
    const q = (lang === "tr") ? qb.getAttribute("data-q-tr") : qb.getAttribute("data-q-en");
    inputEl.value = q || "";
    inputEl.focus();
  });

  sendBtn.addEventListener("click", sendMessage);
  inputEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter"){ e.preventDefault(); sendMessage(); }
  });

  langBtn.addEventListener("click", () => {
    lang = (lang === "tr") ? "en" : "tr";
    localStorage.setItem("lang", lang);
    applyLang();

    // Optional: after switching language, show a short message + keep flow
    botSay(lang === "tr" ? "Dil TÃ¼rkÃ§e olarak ayarlandÄ±." : "Language set to English.");
    // Keep state as is, no reset.
  });

  // ======================
  // INIT
  // ======================
  applyLang();
  startFlow();
});
</script>
</body>
</html>
